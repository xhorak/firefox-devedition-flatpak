{
    "id": "com.adobe.FlashPlayer.NPAPI",
    "runtime": "org.mozilla.FirefoxNightly",
    "build-extension": true,
    "sdk": "org.freedesktop.Sdk//1.6",
    "separate-locales": false,
    "appstream-compose": false,
    "build-options": {
        "prefix": "/app/lib/mozilla/plugins/",
        "env": {
            "PATH": "/app/lib/mozilla/plugins/bin:/app/bin:/usr/bin"
        }
    },
    "modules": [
        {
            "name": "FlashPlayer",
            "buildsystem": "simple",
            "build-commands": [
                "install -Dm755 apply_extra ${FLATPAK_DEST}/bin/apply_extra"
            ],
            "sources": [
                {
                    "type": "script",
                    "dest-filename": "apply_extra",
                    "commands": [
                        "mkdir -p ${FLATPAK_DEST}/extra/flash_player",
                        "tar xvzf ${FLATPAK_DEST}/extra/flash_player.tar.gz -C ${FLATPAK_DEST}/extra/flash_player",
                        "cp ${FLATPAK_DEST}/extra/flash_player/libflashplayer.so /app/lib/mozilla/plugins",
                        "rm -rf ${FLATPAK_DEST}/extra/flash_player ${FLATPAK_DEST}/extra/flash_player.tar.gz"
                    ]
                },
                {
                    "type": "extra-data",
                    "filename": "flash_player.tar.gz",
                    "url": "https://fpdownload.adobe.com/get/flashplayer/pdc/30.0.0.154/flash_player_npapi_linux.x86_64.tar.gz",
                    "sha256": "04f1323404dd9a9d86807dfee0290877709fea043b9c8483cd653284fc7fd70f",
                    "size": 9047298
                }
            ]
        },
        {
             "name": "appdata",
             "buildsystem": "simple",
             "build-commands": [
                 "mkdir -p ${FLATPAK_DEST}/share/appdata",
                 "cp com.adobe.FlashPlayer.NPAPI.appdata.xml ${FLATPAK_DEST}/share/appdata",
                 "appstream-compose  --basename=com.adobe.FlashPlayer.NPAPI --prefix=${FLATPAK_DEST} --origin=flatpak com.adobe.FlashPlayer.NPAPI"
             ],
             "sources": [
                 {
                     "type": "file",
                     "path": "com.adobe.FlashPlayer.NPAPI.appdata.xml"
                 }
             ]
         }
    ]
}

